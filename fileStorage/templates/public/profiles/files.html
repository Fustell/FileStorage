{% extends 'public/templates/public_template.html' %}


{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            <div class="mb-3 mt-3">
                <h2 class="mb-3" style="font-weight:300">Upload file</h2>
                <div class="form-group mb-3">
                    <div class="custom-file">
                        <label for="file_input" id="file_input_label" class="custom-file-label">Select file</label>
                        <input type="file" class="custom-file-input" id="file_input" oninput="input_filename();">
                    </div>
                </div>
                <button onclick="upload('{{url_for('upload_file')}}');" id="upload_btn" class="btn btn-primary">Upload
                    file
                </button>
                <button class="btn btn-primary d-none" id="loading_btn" type="button" disabled>
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    Uploading...
                </button>
                <button class="btn btn-secondary d-none" id="cancel_btn" type="button" onclick="reset();">Cancel
                    upload
                </button>
            </div>
            <div id="progress_wrapper" class="d-none">
                <label id="progress_status">50% uploaded</label>
                <div class="progress mb-3">
                    <div id="progress" class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0"
                         aria-valuemax="100"></div>
                </div>
            </div>
            <div id="alert_wrapper"></div>
        </div>
    </div>
    <table class="table table-dark">
        <thead>
        <tr>
            <th scope="col">Номер</th>
            <th scope="col">Назва</th>
            <th scope="col">Маса файлу</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% for file in files %}
        <tr>
            <th scope="row">{{loop.index}}</th>
            <td>{{file.filename}}</td>
            <td>{{file.fileSize}} байт</td>
            <td>
                <a type="submit" class="btn btn-danger" href="/profile/delete-file/{{file.folderId}}">Видалити</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
            integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
            integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
            crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}">
    </script>
    {% endblock %}